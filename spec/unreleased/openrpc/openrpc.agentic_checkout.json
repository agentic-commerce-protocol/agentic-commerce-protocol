{
  "openrpc": "1.3.2",
  "info": {
    "title": "ACP Agentic Checkout — MCP Binding",
    "version": "unreleased",
    "description": "MCP transport binding for the Agentic Commerce Protocol checkout API. Defines 5 MCP tools that map 1:1 to ACP's REST checkout operations.\n\nAll domain schemas are referenced from the existing JSON Schema bundle — this spec introduces no new domain types.\n\nThe endpoint URL is communicated out-of-band (not via discovery). Authentication is handled at the MCP server level, not per-request."
  },
  "servers": [
    {
      "name": "merchant",
      "url": "{endpoint}",
      "description": "Merchant-provided MCP endpoint. Obtain via merchant onboarding or documentation.",
      "variables": {
        "endpoint": {
          "default": "https://merchant.example.com/mcp",
          "description": "The merchant's MCP endpoint URL"
        }
      }
    }
  ],
  "components": {
    "schemas": {
      "meta": {
        "type": "object",
        "description": "Protocol metadata mapped from ACP HTTP headers. Authentication is handled at the MCP server level and is not included here.",
        "required": ["api_version"],
        "additionalProperties": true,
        "properties": {
          "api_version": {
            "type": "string",
            "description": "ACP API version date (e.g. '2026-01-30'). Maps to the API-Version header."
          },
          "idempotency_key": {
            "type": "string",
            "description": "Unique key for retry safety. Maps to the Idempotency-Key header. Recommended for create and complete operations."
          },
          "request_id": {
            "type": "string",
            "description": "Correlation ID for request tracing. Maps to the Request-Id header."
          },
          "user_agent": {
            "type": "string",
            "description": "Agent identification string. Maps to the User-Agent header."
          },
          "accept_language": {
            "type": "string",
            "description": "Locale preference (e.g. 'en-US'). Maps to the Accept-Language header."
          },
          "signature": {
            "type": "string",
            "description": "Request signature for integrity verification. Maps to the Signature header."
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Request signing timestamp (RFC 3339). Maps to the Timestamp header."
          }
        }
      }
    }
  },
  "methods": [
    {
      "name": "create_checkout_session",
      "summary": "Create a checkout session",
      "description": "Create a new checkout session from line items, currency, and capabilities. Maps to POST /checkout_sessions.",
      "params": [
        {
          "name": "meta",
          "required": true,
          "schema": { "$ref": "#/components/schemas/meta" }
        },
        {
          "name": "payload",
          "required": true,
          "description": "Checkout session creation data. Matches the REST request body schema exactly.",
          "schema": { "$ref": "../json-schema/schema.agentic_checkout.json#/$defs/CheckoutSessionCreateRequest" }
        }
      ],
      "result": {
        "name": "checkout_session",
        "description": "The created checkout session with authoritative cart state.",
        "schema": { "$ref": "../json-schema/schema.agentic_checkout.json#/$defs/CheckoutSession" }
      }
    },
    {
      "name": "get_checkout_session",
      "summary": "Retrieve a checkout session",
      "description": "Returns the latest authoritative state for a checkout session. Maps to GET /checkout_sessions/{checkout_session_id}.",
      "params": [
        {
          "name": "meta",
          "required": true,
          "schema": { "$ref": "#/components/schemas/meta" }
        },
        {
          "name": "id",
          "required": true,
          "description": "The checkout session ID. Maps to the checkout_session_id path parameter.",
          "schema": { "type": "string" }
        }
      ],
      "result": {
        "name": "checkout_session",
        "description": "Current checkout session state.",
        "schema": { "$ref": "../json-schema/schema.agentic_checkout.json#/$defs/CheckoutSession" }
      }
    },
    {
      "name": "update_checkout_session",
      "summary": "Update a checkout session",
      "description": "Apply changes (items, fulfillment address, fulfillment option) and return updated authoritative cart state. Maps to POST /checkout_sessions/{checkout_session_id}.",
      "params": [
        {
          "name": "meta",
          "required": true,
          "schema": { "$ref": "#/components/schemas/meta" }
        },
        {
          "name": "id",
          "required": true,
          "description": "The checkout session ID. Maps to the checkout_session_id path parameter.",
          "schema": { "type": "string" }
        },
        {
          "name": "payload",
          "required": true,
          "description": "Fields to update on the checkout session. Matches the REST request body schema exactly.",
          "schema": { "$ref": "../json-schema/schema.agentic_checkout.json#/$defs/CheckoutSessionUpdateRequest" }
        }
      ],
      "result": {
        "name": "checkout_session",
        "description": "Updated checkout session state.",
        "schema": { "$ref": "../json-schema/schema.agentic_checkout.json#/$defs/CheckoutSession" }
      }
    },
    {
      "name": "complete_checkout_session",
      "summary": "Complete a checkout session",
      "description": "Finalize the checkout by applying a payment method. Creates an order and returns completed state on success. Maps to POST /checkout_sessions/{checkout_session_id}/complete.",
      "params": [
        {
          "name": "meta",
          "required": true,
          "schema": { "$ref": "#/components/schemas/meta" }
        },
        {
          "name": "id",
          "required": true,
          "description": "The checkout session ID. Maps to the checkout_session_id path parameter.",
          "schema": { "type": "string" }
        },
        {
          "name": "payload",
          "required": true,
          "description": "Payment data and optional buyer/attribution/risk signals. Matches the REST request body schema exactly.",
          "schema": { "$ref": "../json-schema/schema.agentic_checkout.json#/$defs/CheckoutSessionCompleteRequest" }
        }
      ],
      "result": {
        "name": "checkout_session_with_order",
        "description": "Completed checkout session with the created order.",
        "schema": { "$ref": "../json-schema/schema.agentic_checkout.json#/$defs/CheckoutSessionWithOrder" }
      }
    },
    {
      "name": "cancel_checkout_session",
      "summary": "Cancel a checkout session",
      "description": "Cancel a session if not already completed or canceled. Optionally include an intent trace to communicate why the session is being abandoned. Maps to POST /checkout_sessions/{checkout_session_id}/cancel.",
      "params": [
        {
          "name": "meta",
          "required": true,
          "schema": { "$ref": "#/components/schemas/meta" }
        },
        {
          "name": "id",
          "required": true,
          "description": "The checkout session ID. Maps to the checkout_session_id path parameter.",
          "schema": { "type": "string" }
        },
        {
          "name": "payload",
          "required": false,
          "description": "Optional cancellation data including intent trace. Matches the REST request body schema exactly.",
          "schema": { "$ref": "../json-schema/schema.agentic_checkout.json#/$defs/CancelSessionRequest" }
        }
      ],
      "result": {
        "name": "checkout_session",
        "description": "Canceled checkout session.",
        "schema": { "$ref": "../json-schema/schema.agentic_checkout.json#/$defs/CheckoutSession" }
      }
    }
  ]
}
